<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Details</title>
    <link rel="stylesheet" href="/styles/item.css">
</head>
<body>
    <div class="container">
        <div class="item-details">
            <h1>Item: <%= item.name %></h1>
            <p>Description: <%= item.description %></p>
            <p>Price: <%= item.price %></p>
            <p>Category: <%= category.name %></p>
            <p>Brand: <%= item.brand %></p>
            <p>Model: <%= item.model %></p>
            <p>Stock: <%= item.stock %></p>
            <p>Created At: <%= item.created_at %></p>
            <p>Updated At: <%= item.updated_at %></p>
        </div>

        <div class="item-suppliers">
            <h2>Suppliers</h2>
            <ul>
                <% suppliers.forEach(supplier => { %>
                    <li><a href="/suppliers/<%= supplier.id %>"><%= supplier.name %></a></li>
                <% }); %>
            </ul>
        </div>

        <div class="item-form">
            <h2>Update Item: <%= item.name %></h2>
            <form action="/items/<%= item.id %>?_method=PUT" method="POST">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" value="<%= item.name %>" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="description">Description:</label>
                    <textarea id="description" name="description" required class="form-control"><%= item.description %></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="price">Price:</label>
                        <input type="number" id="price" name="price" value="<%= item.price %>" required class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="stock">Stock:</label>
                        <input type="number" id="stock" name="stock" value="<%= item.stock %>" required class="form-control">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="brand">Brand:</label>
                        <input type="text" id="brand" name="brand" value="<%= item.brand %>" required class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="model">Model:</label>
                        <input type="text" id="model" name="model" value="<%= item.model %>" required class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label for="category_id">Category:</label>
                    <select id="category_id" name="category_id" required class="form-control">
                        <% categories.forEach(category => { %>
                            <option value="<%= category.id %>" <%= category.id === item.category_id ? 'selected' : '' %>><%= category.name %></option>
                        <% }); %>
                    </select>
                </div>
                <div class="form-group">
                    <label for="supplier_id">Supplier:</label>
                    <select id="supplier_id" name="supplier_id" required class="form-control">
                        <% suppliers.forEach(supplier => { %>
                            <option value="<%= supplier.id %>"><%= supplier.name %></option>
                        <% }); %>
                    </select>
                </div>
                <div class="form-group">
                    <label for="supply_price">Supply Price:</label>
                    <input type="number" id="supply_price" name="supply_price" value="<%= supply_price %>" required class="form-control">
                </div>
                <button type="submit" class="btn">Update Item</button>
            </form>
        </div>

        <form action="/items/<%= item.id %>?_method=DELETE" method="POST" class="delete-form">
            <button type="submit" class="btn btn-danger">Delete Item</button>
        </form>
        <a href="/items" class="btn">Back to Items</a>
    </div>
</body>
</html>